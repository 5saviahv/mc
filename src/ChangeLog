1998-04-08  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* widget.c (update_input): Set the used flag early in update_input
	to allow X widget to catch the right value

	* screen.c (do_enter): Return the status for the operation.

	* main.c (main): Sigh.  This was hard. I added support for argp.
	Right now we support both argp for the GNOME edition and popt for
	the other editions.  I will remove popt support in the future and
	only keep argp. 

	* dlg.c (add_widgetl): Adding widgets to an already running dialog
	had some flaws.  Fix this.

Wed Apr  8 11:15:29 1998 Alex Tkachenko <alex@bcs.zp.ua>

	* src/find.c: changes to find_parameters/find_file i18n.

	* src/widget.c: new function introduced, button_scan_hotkey();
	button_new() and button_set_text() fixed to use mentioned function.
	
	* src/key.[ch], src/dlg.c: changes to make recognition of ESC char as 
	ALT(c) possible for 8-bit chars. (By replacing 'A'/'Z' comparisons with
	call to isalpha() in the way proposed by Norbert).

	* src/boxes.c: changes to display box i18n
	
	* src/learn.c: changes to learn key dialog i18n

1998-04-07  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* main.c (update_one_panel_widget): New routine: Updates a panel
	based on the widget, not the index.  Used by the GUI versions. 

	* find.c (find_file): Cancel idle tasks before we destroy the find
	dialog. 

	* dlg.c (destroy_dlg): Call x_destroy_dlg_start, a new hook that
	is invoked to allow the frontend code to prepare for dialog
	destruction.  Only the Gnome edition is using this: it uses this
	to hide the dialog and avoid flickering.

	* main.c: dtterm also has mouse support.

1998-04-06  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* wtools.c (quick_callback): Process DLG_KEY events on X. 

	* utilunix.c (max_open_files): new routine;  Used to figure out
	the number of available file descriptors.

Sat Apr  4 00:16:49 1998 Alex Tkachenko <alex@bcs.zp.ua>

	* src/layout.c: changes to layout dialog box i18n

	* src/option.c: changes to configure box i18n
	
	* src/cmd.c: added N_() macro for machine_str
	
	* src/wtools.c (real_input_dialog_help): ok/cancel buttons are places
	symmetrically spaced relatively to center of the box. It produces
	nicer appearance with i18n (IMO :)
	
	* src/boxes.c (confirm_box): i18n stuff added.

Mon Apr  6 07:48:22 1998 Pavel Roskin <pavel@absolute.spb.su>

	* Makefile.in: "make dist" works with bash 1.x again

Fri Apr  3 05:23:20 1998 Alex Tkachenko <alex@bcs.zp.ua>

	* configure.in: ALL_LINGUAS test added, to allow specify list
	of languages to be installed by setting env variable before
	configure. If it is empty, it defaults to full list.    

	* src/menu.h menu_entry.{hot_pos, is_dupped} dropped
	
	* src/menu.c: consistency fixes: pull-down menu items are now 
	accessible either with arrow keys or with hotkeys, denoted with & 
	(and highlighted). (key combinations, placed to the right of items
	intended to be used from outside the menus). Freeing menu entries
	removed as it no longer needed
	
	* src/main.c, edit/editmenu.c: menubar init code is changed to conform
	above fixes.
	
	* edit/edit.h: use of "Cancel" in error_dialogs replaced with 
	"Dismiss", to avoid collisions in translation of "Cancel" in other
	places with this case.
	
	* src/boxes.c: select_format() and it's support removed, as it is
	obsoleted by input line history feature. display_init()/display_callback
	fixed to suite i18n changes. sort_box() - alike.
	
	* src/option.c: pause_options added &'s and gettext calls to expand
	statically assigned values.

	* src/widget.c: (radio_callback) hotkey recognition is changed to
	&-notation, rather than simple uppercase.
	
	* src/dlg.c: (dlg_try_hotkey) plain symbol comparison replaced with
	call to isalpha(), this fixes errorneous exit from input line, when
	button hotkey is 8-bit NLS char.

Fri Apr  3 12:23:28 1998  Norbert Warmuth  <k3190@fh-sw.de>

	* TODO: Removed obsolete entries: Similar entries in tree view 
	are displayed correct; user specific files has been moved 
	to ~/.mc/
	Added: Check what to do with menubar_arrange/destroy_menu stubs 
	in tk/tkmenu.c; the interal editor (not portet yet) adds entries 
	to the wrong menubar

Wed Apr  1 00:15:30 1998  Norbert Warmuth  <k3190@fh-sw.de>

	* key.c, key.h (numeric_keypad_mode, application_keypad_mode): New
	functions which encapsulate two hardcoded escape sequences from main.c.

	* main.c (main): Use the two new functions from key.c

	* main.c, screen.c: Moved all file selection keys from the default
	keymap to the keymap for panels in listing mode. 
	Changed *_selection_cmd to *_selection_cmd_panel in panel_keymap
	(functions in panel_keymap get a WPanel * as first parameter,
	i.e. the indirection with cpanel isn't necessary).

	* main.c (midnight_callback): Keys '*' and '-' were not treated
	when only_leading_plus_minus==0;
	Optimized the if-clauses a little bit (i.e. removed duplicate
	checks). More optimation is possible but it would make the whole
	stuff completly unreadable.

	* key.c (correct_key_code): KP_ADD, KP_SUBTRACT and KP_MULTIPLY
	will be translated to +, - and * only if the option
	alternate_plus_minus is turned off.

	* learn.c (learn_keys): Turn alternate_plus_minus temporarily on
	to avoid translation of KP_ADD, KP_SUBTRACT and KP_MULTIPLY in
	correct_key_code/make sure keypad is in application mode (makes it 
	possible to learn this keys).

	* cmd.c (reverse_selection_cmd_panel): New function (renamed from
	reverse_selection_cmd, takes a WPanel * as parameter, references to 
	cpanel changed to panel/the passed parameter).
	reverse_selection_cmd now simply calls this function with cpanel.
	This pair was missing among the *_selection_cmd* functions.

	* cmd.h: Added function prototypes.

1998-03-31  Paul Sheer <psheer@obsidian.co.za>

	* cmd.c (nice_cd): Forgot to invoke the history registration in
	one spot.

1998-03-30  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* menu.c (destroy_menu): Implement destroy_menu for all of the
	ports as a routine that frees the menu entries if
	internationalization has been enabled.

	* wtools.c (quick_dialog_skip): Do not i18n any string that is empty.

Sun Mar 29 23:02:09 1998 Alex Tkachenko <alex@bcs.zp.ua>

	* src/menu.[ch]: new member to menu_entry (hot_pos) introduced to make
	internationalized version of menu use externally defined hotkeys
	(denoted with preceding &). create_menu() fixed to load intl text of
	the entries. Some fixes around menu.c to enable usage of reloaded 
	hotkeys.
	
	* main.c, editmenu.c: menu initialization code fixed to conform new
	menu structure. editmenu init code includes N_(..) now.
	
	* menu.c, layout.c, editwidget.c: bar menu items displacement is made
	dynamically upon initialization and window size changes. Mouse event
	processing is fixed accordingly. 

Sat Mar 28 13:18:36 1998 Alex Tkachenko <alex@bcs.zp.ua>

	* src/screen.c: (repaint_file) last patches to format_file() in the
	same file broke appearance of panels in brief mode -- fixed.

Mon Mar 30 20:02:49 1998  Paul Sheer <psheer@obsidian.co.za>

	* main.c, screen.c, dirhist.c, dirhist.h, main.h, widget.c,
	main.h and others?: Directory history added. The previous
	directory history code was removed. The directory history now
	loads and saves using the same routines as the input widget. The
	keys meta-y, and meta-u are used to go backward and forward
	through the history. The buttons to the right and left of the
	current directory display on the panel can be used as well. The
	v button brings up a history, but no key is assigned to this.
	Discussion as to correct color and shape of these buttons is
	open. show_hist() in widget.c is made generic to be called for
	any widget. Help pages still needed to be added for the
	directory history.

Wed Mar 25 19:05:31 1998  Norbert Warmuth  <k3190@fh-sw.de>

	* view.c (view_done): Set monitor off before deleting the view
	file dialog.

	* subshell.c (init_subshell): Added ':q' to $cwd in the precmd for 
	tcsh. It preventes command and filename substitution (e.g. for
	a directory named "[word] words")

Mon Mar 23 18:06:10 1998  Norbert Warmuth  <k3190@fh-sw.de>

	* main.c: Deleted some old and unused code

1998-03-24  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* All over the src/ directory: Internationalization changes.

	* background.c: Avoid buffer over-runs and reduce number of
	internationalization strings. 

Mon Mar 23 14:04:07 1998  Philippe De Muyter  <phdm@macqel.be>

	* configure.in (nlink_t): Check it using AC_CHECK_TYPE.
	* acconfig.h (nlink_t): New define slot.

Mon Mar 23 08:17:55 1998 Pavel Roskin <pavel@absolute.spb.su>

	* src/main.c: mcedit can be named mce or mcedit.exe - only
	3 first letters are significant. The same for mcview.
	Console is always saved in do_execute() if it was saved there.
	
	* src/util.h: STRNOMP introduced (strncmp on unix and strnicmp
	on OS2_NT)
	
	* slang/slgetkey.c: SLang_getkey() and SLang_input_pending()
	enabled for OS2_NT
	
	* myslang.h: using fast one_vline() and one_hline() for OS2_NT
	
Mon Mar 23 00:47:51 1998  Norbert Warmuth  <k3190@fh-sw.de>

	* autogen.sh: added support for builddir != srcdir

	* doc/Makefile.in: The manual pages are generated files and
	located in the builddir and not in the srcdir.

	* find.c (find_file): Use the same hotkey for the panelize button
	as we use with the external panelize command.

Fri Mar 20 17:51:01 1998  Norbert Warmuth  <k3190@fh-sw.de>

	* myslang.h: --with-ncurses didn't compile: renamed
	KEY_BACKTAB to KEY_BTAB (the name ncurses uses)

	* dlg.c (dlg_key_event): likewise

1998-03-19  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* screen.c: Remove KEY_DC forever.  This should have never been
	here. 

Wed Mar 18 22:08:34 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* achown.c (do_enter_key): call endgrent, endpwent.
	
	* chown.c (init_chown): call endgrent, endpwent.

Tue Mar 17 23:58:40 1998  Pavel Machek <pavel@elf.ucw.cz>

	* src/file.c: Fix for the case where the disk gets full. 

Tue Mar 16 18:35:53 1998 Stas Maximov <stmax@u213.srcc.msu.su>

	* src/hotlist.c default values for dialogs which add entries to hotlist
	are now set to the current directory.

Tue Mar 10 14:42:01 1998 Stas Maximov <stmax@u213.srcc.msu.su>

	* vfs/extfs.c, lib/mc.ext, vfs/extfs/extfs.ini, vfs/extfs/cpio.in
	Added support for cpio extfs including compressed and gziped
	cpio archives. compress and gzip handled separately because I saw
	a lot of systems which have compress, but don't have gzip.

Sat Feb 21 16:46:49 1998 Stas Maximov <stmax@u213.srcc.msu.su>

	* src/subshell.c: failed to grantpt on SVR4 due to zero-initialized
	subshell_pid. sigaction handler for SIGCHLD does waitpid(subshell_pid,
	...) and when subshell_pid == 0 it steals the zombie from grantpt(3) 
	which does fork/exec/waitpid for suid program to set the permissions on
	pty. It's enough to initialize it to 1 or -2.

1998-03-16  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* util.c (convert_pattern): Now the internal buffer is malloc()ed
	instead of being static.  This is required for long patterns.
	(regexp_match): Free the pattern after calling convert_pattern().

	* file.c (file_mask_dialog): Free the source_mask after calling
	convert_pattern().

Mon Mar 16 13:03:45 1998  Pavel Roskin <pavel@absolute.spb.su>

	* cmd.c: Internal edit is used by default. vi may be
        confusing for some users.

	* tree.c: tree_rmdir_cmd() should not return any value,
        because it is not analyzed for errors.

	* main.c: NT code: use O_BINARY instead of _O_BINARY

	* util.c: DO not test for arguments that do not make sense under
	Windows NT.

	* file.c: utime.h always included for Windows NT port. 

	* view.c: Events are flushed only if the ports supports it. 
	
Mon Mar 16 12:30:39 1998  Stas Maximov <stmax@u213.srcc.msu.su>

	* hotlist.c: Defaults on the hotlist add-current and new-entry is
	the current directory.

Sat Mar 14 17:30:21 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* file.c (panel_operate): Why was the flags in query_dialog set to
	D_INSERT is a big mistery.  Should be fixed now.

Fri Mar 13 18:10:58 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* dlg.c (dlg_stop): New routine used to finish dialog boxes.

	* cmd.c (set_panel_filter_to): Implementation split.  To be used
	by GNOME.

	* widget.c (input_new): GNOME-entry widget is inspired in the
	WInput + the history patches from Paul.  Use the GNOME-entry
	history, as this makes it easier to deal with the filter button on
	the panel.
	
	* setup.c (save_panel_types): Do not use if running on the gnome
	edition.   This need a lot of fixing for making this work with
	gnome and session management.

	* main.c (do_nc): DO not call setup_panels_and_run_mc as
	create_panels in gnome edition does all this.

	(setup_mc):  Skip part of the setup.
	
	(do_execute): Do not Execute any of the pause code after
	run for gnome.
	
Wed Mar 12 17:46:09 1998  Norbert Warmuth  <k3190@fh-sw.de>

	* screen.c (chdir_other_panel, chdir_to_readlink): Use passed
	panel instead of cpanel (removed mixed use of panel and cpanel).

	* main.c, screen.c: Deleted F13 from the default keymap, added F13 
	and F14 to the panel's keymap (the keymap for panels in listing
	mode). These two keys are only useful for panels in listing mode. 
	It seems there are even more candidates for such a move. Especially
	select_cmd and unselect_cmd which appeared recently for the GNOME
	edition in screen.c act unexpected for panels in tree-mode.

	* cmd.c (view_simple_cmd): Added WPanel* to the parameter list.

	(edit_cmd_new): No need to get a panel because it is not used.

	* panelize.c: Changed hotkey of the Panelize button (Alt-p is
	already used by the input line history). I wonder if I should
	change it in the find dialog, too (just to have a unique hotkey
	for the panelize button).

Wed Mar 11 19:02:48 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* view.c: Lots of changes:  Split the X11 code from the main view
	program.  This is needed to cleanly support the addition of the
	Gnome version of the file viewer;

	New names for old functions (just a view_ prefix):
	view_add_character, view_add_string, view_gotoyx, view_set_color,
	view_display_clean.  Now all of them take a WView argument (which
	is ignored in the macro for the text edition).  This is to support
	multiple open views at once. 

	* boxes.c (symlink_dialog): Enable ok/cancel buttons for the Gnome edition.

	* cmd.c (link_cmd, symlink_cmd): Provide the filename to operate
	on. 

Tue Mar 10 20:41:45 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* cmd.c (unselect_cmd_panel, select_cmd_panel): To avoid races on
	the X11 version, these routines now take a panel argument at
	invocation time. 

	* widget.c (radio_callback): Call x_radio_focus for FOCUS/UNFOCUS
	events. 
	(button_callback): Fallback to default_msg on WIDGET_FOCUS
	messages. 

1998-03-10  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* xslint.c (getch): Added missing "return".

	* utilunix.c (init_groups): Added parentheses around
	assignment/truth value.

	* boxes.c: #include <stdlib.h>

	* screen.c (string_inode): Cast fe->buf.st_ino to long to be
	consistent with sprintf format.

	* main.c (handle_args): Added parentheses around assignment/truth value.

Sat Mar  7 14:33:38 1998  Pavel Roskin <pavel@absolute.spb.su>

        * src/complete.c: obsolete hack for OS/2 and NT removed.
        Completion works for NT now (not very good)

        * src/main.c: HOME variable is respected by NT and OS/2
        versions. If it is missing, we use LIBDIR on OS2_NT and "/"
        on Unix.

        * src/key.h: SHIFT_PRESSED is set to 0x0010 on NT. This value
        doesn't conflict with definitions for ALT and CTRL, but it is
        SDK-compatible.

        * vfs/vfs.h: Minor changes for OS/2. EMX defines mkdir with
        2 arguments

        * vfs/tcputil,c, vfs/utilvfs.c: signal.h was includes twice.
	
        * vfs/Makefile.in: undelfs.h is not used and should disapper
	
        * slang/slos2tty.c: new file, copied from SLang-0.99.38,
        needed for OS/2 port
	
        * slang/Makefile.in: added slos2tty.c
	
        * vfs/extfs/README: annoying spell errors corrected
	
        * src/main.c: --termcap disabled for OS2_NT because it doesn't
        (and cannot) work. ARCH_FLAGS is not needed anymore.

        * src/text.c: most includes removed. Added a warning is someone
        compiles this file with HAVE_X. Improved color scheme for
        consoles with 16 background colors (e.g. OS/2). Hack for OS/2
        removed.

        * src/util.c, src/util.h: STRCOMP and MC_ARCH_FLAGS are moved
        to util.h. It may be useful to use them for filenames' completion
        on OS2_NT

Fri Mar  6 19:29:54 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* find.c: Simplify header files: use the fs.h include file. 

	(use x_flush_events).
	
	* screen.c (string_file_name): In GNOME, the CList widget does the
	filename truncation, so we do not do it here. 

	(panel_new): Initialize all of the wpanel contents to zero.  This
	will is required by the GNOME X ports (to figure out if a field
	has been inited or not).

Thu Mar  5 10:28:40 1998  Norbert Warmuth <k3190@fh-sw.de>

	* popt.c (poptParseArgvString): make it compile with the native
	compiler on AIX 4.1.3

1998-03-04  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* cmd.c: Added #include "x.h"

Wed Mar  4 14:49:55 1998  Norbert Warmuth <k3190@fh-sw.de>

	* doc/mc.1.in, mc.hlp: updated (these files haven't been updated
	at the last change to mc.sgml)

	* doc/mc.sgml: spelling error corrected

	* Makefile.in: renamed all references of mc.1 to mc.1.in

	* find.c (locate_egrep): Don't use an absolute path if egrep isn't
	found at the usual places. Then execvp will search the directories 
	passed in the environment PATH variable (a little bit slower but
	better than a defunct find content).

	* tree.c: removed the include file I mistakenly added with my
	last patch.

Tue Mar  3 20:00:36 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* file.c (get_file): Take a panel argument.  I am pretty sure that
	this is broken for the case where we are copying from a WTree. 

	(panel_operate): take a panel argument instead of defaulting to
	cpanel.  

Mon Mar  2 15:54:55 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* dlg.c (create_dlg): Set running to 0 on creation;  
	(add_widgetl): do widget initialization if the dialog is already
	running when this dialog box is created. 

Mon Mar  2 12:11:37 1998  Norbert Warmuth <k3190@fh-sw.de>

	* vfs/ftpfs.c (changetype): Removed the hack which always forced 
	sending the command "TYPE I" when changing to binary transfer mode
	was requested even when MC thought the connection was already in 
	binary mode (bucket->isbinary == 1). The correct fix is now in 
	login_server.

	* vfs/ftpfs.c (login_server): Set the transfer mode stored in
	the bucket to UNKNOWN (the bucket might be reused and the old
	transfer mode isn't valid any longer). 

	* screen.c (panel_key): Cleanup: deleted if-clause with -1 (EV_NONE)
	which isn't delivered to widgets by the dialog manager; always 
	return 1 when key was handled; removed the function keys from the 
	panel's keymap (the function keys are always handled by the 
	buttonbar); don't eat characters below ' ' (C-l and Shift-F3 now 
	work even when quick search was started); characters between 32 and 
	255 start quick search if there is no commandline (no C-s necessary 
	to start search).

	* tree.c (tree_key): likewise
	
Tue Feb 24 18:37:36 1998  Stas Maximov <stmax@u213.srcc.msu.su>

	* subshell.c: Set subshell_pid to 1 on startup

Fri Feb 13 19:59:39 1998  Alexander Savelyev <fano@VCom.kiev.ua>

	* screen.c: KEY_DC is also handled by delete_cmd.

	* vfs/ftpfs.c (chdir): sending the CWD command is not necessary
	(imho).

	(ftpfs_connection_close): Do not use WAIT_REPLY, closes
	connections faster. 

	(open_data_connection): implement the reget command. 
	
	* boxes.c: bigger VFS dialog box.

	* file.c (init_replace): Add support for copying files only if the
	size differs, and support for regetting ftp files.

Wed Feb 11 20:08:50 1998  Norbert Warmuth <k3190@fh-sw.de>

        * user.c (execute_menu_command): Extented the syntax of %-macros
        used in the user menu in order to switch quoting on (default) and
        off, e.g. %0f means don't quote the expanded macro, %f and %1f mean
        quote the expanded macro.


Fri Jan 30 16:43:47 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* dlg.c (create_dlg): Now we pass the flags parameter to the
	create_dialog routine. 

	* tkmain.c (xtoolkit_create_dialog): Check for the grided value

Fri Jan 23 07:28:54 1998  Peter Daum <gator@cs.tu-berlin.de>

	* extfs.c (open_extfs_archive): Pass the filename to the list
	command.

	* extfs/mailfs: New file system for browsing mail files (support
	for compressed mail fiels as well).

Fri Jan 23 07:19:18 1998  Pavel Roskin <pavel@absolute.spb.su>

        * edit/edit.h: mc_mkdir requires 2 arguments for any operation
        system. Obsolete #ifdef's removed.

        * edit/editwidget.c: ansi standard violation removed
	
        * nt/Makefile.NT: default SLang directory is now ../slang. Most
        of SLang sources are no more compiled for MC.

        * nt/drive.h: new file. Copied from os2/drive.h with minor changes

        * nt/ket.nt.c: new way for handling conflicting SHIFT_PRESSED
        definitions. get_event can work without blocking. Copy, move
        and delete operations work normally.

        * nt/slint.nt.c: SLang_getkey2 and Slang_input_pending2 are
        copied from src/slint.c

        * nt/sys/param.h: annoying warnings temporaly suppressed.

        * slang/slvideo.c, slang/slw32tty.c: new files. They contain
        changes by Alexander Dong.

        * src/myslang.h: definitions for acsii symbols removed, since
        they are available in slang.h. Double lines are not used anymore.

        * src/panelize.c: sys/wait.h is included only if HAVE_SYS_WAIT_H
        is defined

        * nt/Makefile.NT: text.c is added
        
	* nt/Makefile.VC4: "-debug" switch for linker is not used for
        release version

        * src/screen.c (show_dir): double lines are no more used by NT and
        OS/2 ports.
	
        * src/wtools.c (real_input_dialog_help): layout of input dialog for
        XView port is corrected

        * edit/edit.h: mc_mkdir requires 2 arguments for any operation
        system. Obsolete #ifdef's removed.

        * edit/editwidget.c: ansi standard violation removed

Wed Jan 21 14:01:29 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* ext.c (regex_command): reverted the patch that changed tests for
	*p == ' ' || *p == '\t' to isspace().  isspace() is true for tabs,
	newlines, carriage-returns and vertical tabs as well.  Which is
	not what we want.

Wed Jan 21 11:58:39 1998  Sung-Hyun Nam <namsh@lgic.co.kr>

	* ftpfs.c (retrieve_dir): Avoid compiler warning by testing
	explicitly the value. 
	
        screen.c (format_file): color not initialized when we met
        empty_line.

Wed Jan 21 11:28:21 1998  Alex Tkachenko  <alex@bcs.zp.ua>

	* cmd.c, utilunix.c: cosmetic changes to reduce compiler warnings
	
	* utilunix.c (my_system): small fix for SCO zombies moved here;
	now it returns WEXITSTATUS(status) instead of status itself. While
	missing it may not hurt on i.e., linux, on SCO it gives incorrect
	value.
	
	* vfs/extfs.c system() calls replaced with my_system() call; this
	allows a greater degree of control - fixes SCO system() return value
	processing. Notice: plain replacement system() with WEXITSTATUS(system)
	does not produce correct behavior (don't ask me why).

	* panelize.c (do_external_panelize): similar fixes for pclose()
	return value on SCO.

	view.c (load_view_file): inverted value of viewer_magic_flag to
	put viewer decompression state in accordance with F8 label text.
	Also default_nroff_flag is initialized to be 1; thus enabling all
	filter processing by default easies mc usage for novice users.

Sun Jan 18 13:47:37 1998  Sung-Hyun Nam <namsh@lgic.co.kr>

	* main.c
	* panel.h, tkscreen.h : error when compile dlg.c
	* tkconf.h : paint_frame
	* screen.c : to include paint_frame
	* tkmain.c : I just copied clr_scr() from the text.c

Fri Jan 16 16:19:59 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* screen.c (format_file): Do not invoke the file_compute_color
	routine for empty lines. 

	* gmain.c: Color scheme for Gnome

	* gscreen.c: Color setup now allocated the GdkColor *.
	
	* color.c: Moved the default color setting to a per-port
	location (text.c for the text mode edition);  new color
	configuration: core;  Fixed the case where the color spec was
	buggy and we kept on a infinite loop; 

Fri Jan 16 13:47:13 1998  Pavel Roskin <pavel@absolute.spb.su>
	
	* nt/drive.nt.c, nt/chmod.nt.c: Updated button_new and check_new
	calls

Fri Jan 16 12:47:39 1998  Norbert Warmuth <k3190@fh-sw.de>

        * vfs/ftpfs.c (command): Don't log passwords when the dialog between
        server and client is logged to a file (mc -l logfile).

        * vfs/ftpfs.c (resolve_symlink, retrieve_dir): When a directory
        contains spaces send two commands ("CWD path" and  "LIST .") instead of
        one command ("LIST path") in order to get directory listings.
