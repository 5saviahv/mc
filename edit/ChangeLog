2001-08-26  Pavel Roskin  <proski@gnu.org>

	* Makefile.am: Don't install libedit.a.

	* Makefile.in: Converted to ...
	* Makefile.am: ... this.

2001-08-24  Pavel Roskin  <proski@gnu.org>

	* Makefile.in (EDITSRC): Add headers.
	(CPPFLAGS): Remove reference to gtkedit.

	Copy all necessary files from gtkedit.
	* Makefile.in (EDITLINKS): Merge with EDITSRC, remove all
	references.

2001-08-24  Pavel Roskin  <proski@gnu.org>

	* syntax.c (syntax_text): Fix recognizing pdksh and zsh scripts.

2001-08-23  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (edit_block_process_cmd): Use execute(), not
	my_system() to relieve interactive scripts, such as spell
	checker, from saving and restoring the terminal.

2001-08-19  Pavel Roskin  <proski@gnu.org>

	* gtkedit.c: Include <sys/param.h> if present - it should always
	be included before <glib.h> to avoid redefining MIN and MAX.
	* editcmd.c [!MIDNIGHT]: Undefine B_ENTER and B_CANCEL before
	redefining them.

	* edit.h: Include <sys/param.h> if present.  Include Gtk+
	headers as system headers.
	* gtkedit.c: Include Gtk+ headers as system headers.

2001-08-18  Pavel Roskin  <proski@gnu.org>

	* syntax.c (syntax_text): Highlight *.pot as PO files.

	* edit.h [GTK]: Fix definition of edit_message_dialog().
	* gtkedit.c (gtk_edit_dialog_message): Use "OK" button, not
	"Cancel", for consistency with the text edition.

2001-08-17  Pavel Roskin  <proski@gnu.org>

	* syntax.c (syntax_text): Add support for PO files.

2001-08-12  Pavel Roskin  <proski@gnu.org>

	* edit.c: Handle CK_Shell.
	* editcmddef.h: Define CK_Shell.
	* editmenu.c (FileMenu): Remove C-o from the "Open file..."
	item.
	(FileMenuEmacs): Likewise.

2001-08-06  Andrew V. Samoilov  <kai@cmail.ru>

	* editcmd.c (edit_replace_prompt): Fix menu location calculation.

2001-08-01  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (edit_save_file): Temporarily disable safe save
	and backups on remote VFS because it doesn't work.  Use
	mc_mkstemps() instead of tempnam().

2001-07-29  Pavel Roskin  <proski@gnu.org>

	* syntax.c (syntax_text): Add support for S-Lang.

2001-07-28  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (menu_save_mode_cmd): Resurrect i18n code lost in
	the last resync with Cooledit.
	Reported by David Martin <dmartina@excite.es>

	* gtkedit.c (gtk_edit_delete_cb): Handler for "delete_event".
	(edit): Connect it.

2001-07-27  Pavel Roskin  <proski@gnu.org>

	* edit.c: Fix include.

2001-07-20  Pavel Roskin  <proski@gnu.org>

	* syntax.c (open_include_file) [GTK]: Use mc_home instead of
	LIBDIR.

2001-07-19  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (edit_canonicalize_pathname): Don't ever use
	getwd(), use g_get_current_dir() instead.

	* editoptions.c (edit_options_dialog): Call edit_load_syntax()
	if user	turned syntax highlighting off to unload the rules.

2001-07-17  Pavel Roskin  <proski@gnu.org>

	* edit.h [MIDNIGHT]: Declare wedit.
	* editmenu.c: Remove wedit declaration.
	* editoptions.c (edit_options_dialog): Load syntax rules if user
	turned syntax highlighting on.
	* syntax.c (edit_load_syntax): Don't load rules if syntax
	highlighting is disabled.

2001-07-13  Pavel Roskin  <proski@gnu.org>

	* editoptions.c (edit_options_dialog): Allow numbers for tab
	spacing. Reported by mharris@redhat.com.
	http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=34852

	* editcmd.c (menu_save_mode_cmd): Give meaningful names to the
	input fields instead of "i" so that they have separate history.
	* editoptions.c (edit_options_dialog): Likewise.

2001-07-11  Pavel Roskin  <proski@gnu.org>

	* editdraw.c (status_string): Use g_snprintf() instead of
	snprintf().
	From Libor Motyèka <l_motycka@ortex.cz>

2001-07-10  Pavel Roskin  <proski@gnu.org>

	* gtkeditkey.c (edit_translate_key): When processing bindings
	with Alt check that Shift is not pressed - it's handled later.

2001-07-05  Pavel Roskin  <proski@gnu.org>

	* editdraw.c: Comment fixes.

2001-06-26  Pavel Roskin  <proski@gnu.org>

	* edit-widget.h (editor_widget): Rename `stat' to `stat1' to
	avoid problems on Solaris with 64-bit file access, when `stat'
	is a macro. All users adjusted.
	Reported by Maksym Polyakov <polyama@yahoo.com>.

2001-06-25  Pavel Roskin  <proski@gnu.org>

	* gtkedit.c: Remove home_dir - it's declared in main.c.

2001-06-15  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (canonicalize_pathname) [GTK]: Rename to ...
	(edit_canonicalize_pathname): ... this to avoid namespace clash.
	* edit.h [MIDNIGHT]: Include "src/cmd.h" and "src/user.h".
	Remove declarations duplicating "src/user.h".
	[GTK]: Include "src/dialog.h" and "src/util.h".

	* editmenu.c (edit_wrap_cmd): Fix declaration.
	(edit_about_cmd): Likewise.
	* editwidget.c (get_key_state): Likewise.

	* editcmd.c (edit_quit_cmd): Don't use strcmp on the result of
	gtk_dialog_cauldron() since it's NULL if the dialog has been
	closed without using buttons.

	* edit.c (edit_execute_cmd): Put time format to a variable to
	avoid gcc warning about Y2K issues with %c in strftime().

2001-06-14  Pavel Roskin  <proski@gnu.org>

	* edit.c: Declare cmd_F* static. Comment out cmd_F9.

	* edit.c: Use indented #error for compatibility with old C
	compilers.

2001-06-13  Pavel Roskin  <proski@gnu.org>

	* edit.c (edit_execute_cmd) [GTK]: Disable user menu - it
	doesn't work.
	(user_menu) [GTK]: Disable.
	* gtkedit.c (tb_items): Use complete words. Disable pull-down
	menu.

2001-06-09  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (catstrs): Use interactive_display() without
	specifying the help file.
	From Andrew V. Samoilov.

2001-06-08  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* editcmd.c [HAVE_CHARSET]: Really include charset.h.
	* editmenu.c (edit_wrap_cmd): Memory leaking fixed.

2001-06-05  Pavel Roskin  <proski@gnu.org>

	* edit.c [HAVE_CHARSET]: Include charsets.h and selcodepage.h.
	* editcmd.c [HAVE_CHARSET]: Add charset conversion support.
	* editdraw.c [HAVE_CHARSET]: Likewise.
	From Walery Studennikov <hqsoftware@mail.ru>.

2001-06-01  Pavel Roskin  <proski@gnu.org>

	* gtkedit.h: Warning fix - use stricter declarations for
	destroy_me and destroy_me_user_data.

2001-05-31  Pavel Roskin  <proski@gnu.org>

	* Makefile.in: Define HAVE_X and HAVE_GNOME, not just GTK -
	header files are using them.

	* editdraw.c (edit_render) [GTK]: Revert previous patch, it
	broke compilation.

2001-05-31  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* editdraw.c (edit_status): Use strcpy (s, ) instead of
	sprintf (s, "%s", ).

	(set_color) [MIDNIGHT]: Became a macro.
	(render_edit_text) [defined(MIDNIGHT) || defined(GTK)]: Warning fix.
	(edit_render) [GTK]: Eliminate win variable.
	(key_pending) [!GTK]: Warning fix.

2001-05-30  Pavel Roskin  <proski@gnu.org>

	* editdraw.c (status_string): Use is_printable(). Declare
	static. Eliminate intermediate buffer. Use memset() for filling.
	Print byte as unsigned. Use C notation for hex numbers.

	* editdraw.c (status_string): Don't print non-printable chars.
	Better formatting. Print "<EOF>" at the end of file instead of
	-1. Use snprintf instead of sprintf.

2001-05-30  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* syntax.c (open_include_file) [MIDNIGHT]: Don't hardcode location
	of syntax file(s) with LIBDIR, use mc_home instead.
	From Ludovic Drolez <ludovic.drolez@freealter.com>.

	(syntax_text): Use perl.syntax to highlight perl modules (.pm).

2001-05-18  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (edit_replace_prompt): Warning fix.

2001-02-26  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (edit_delete_macro_cmd) [MIDNIGHT]: Don't use
	CK_Macro on the argument to edit_delete_macro().

	* edit.c (edit_init_file): Remove, it's useless. All the
	necessary files should be created when needed.
	* edit.h: Remove declaration of edit_init_file().

2000-11-01  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* editcmd.c (canonicalize_pathname) [GTK]: memory leaking fixed

2000-10-30  Pavel Roskin  <proski@gnu.org>

	* editcmd.c (canonicalize_pathname) [GTK]: Make the argument
	constant.
	(edit_split_filename) [GTK]: Make the second argument constant
	to match the declaration.

2000-10-30  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* editcmd.c (edit_save_file): better error handling on writting

	(edit_sort_cmd): saved sort options proposed in dialog

	edit.h, editcmd.c: declaration for edit_save_block () added

	(edit_split_filename): f constified

	* edit.c (edit_init) [ENABLE_NLS]: option_whole_chars_search
	expanded by national letters using current locale on first call

	(edit_file_is_open) [MIDNIGHT]: all occurences and related code
	are commented

	(edit_execute_cmd): typo in error message fixed

2000-09-30  Pavel Roskin  <proski@gnu.org>

	* libgettext.h: Removed, shouldn't be here.
	* Makefile.in: Adjusted to remove libgettext.h

2000-09-15  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* editcmd.c (edit_delete_macro, edit_(load|save)_macro_cmd): don't
	translate keywords written to macro file or macro don't work, at least
	for Cyrillic. Made this as separate commit, so, if it seriously breaks
	compatibility it's easy to revert it.

2000-09-15  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* editcmd.c (edit_save_file): fopen()+fwrite()+fclose() replaced
	by open()+write()+close() to restore possibility to edit files
	over Midnight Commander's VFSes

	(edit_replace_cmd) [MIDNIGHT]: some more right algorithm to calculate
	menu coordinates used. I don't like if menu hides replaced text.

	(edit_goto_cmd): Memory leaking fixed when f is empty string

2000-09-07  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* edit.c (check_file_access) [MIDNIGHT,GTK]: error message localized;
	some cosmetics changes to avoid annoying warnings

	* editcmd.c (edit_save_file): pclose returns 0 on success,
	file fclose()d when fwrite fails

	(pipe_mail): malloc () + sprintf () replaced by g_strdup_printf ()

	* syntax.c (syntax_text): Makefile replaced by [Mm]akefile to cover
	makefile and GNUmakefile
	(upgrade_syntax_file): infinitive loop fixed when rule file
	is outdated but it cannot be unlinked/overwritten

2000-08-30  Pavel Roskin  <proski@gnu.org>

	* editwidget.c [!MIDNIGHT]: include xdnd.h
	* Makefile.in: distribute xdnd.h

2000-08-18  Pavel Roskin  <proski@gnu.org>

	* Makefile.in: adjusted list of distributed files.
	Added rule for rebuilding Makefile

2000-08-08  Pavel Roskin  <proski@gnu.org>

	* gtkedit.c [GTK]: don't include mousemark.h
	* gtkedit.h [GTK]: likewise

2000-08-03  Pavel Roskin  <proski@gnu.org>

	* mousemark.c, mousemark.h: removed
	* Makefile.in: don't distribute mousemark.h
	* gtkedit.c [MIDNIGHT]: don't include mousemark.h
	* gtkedit.h [MIDNIGHT]: likewise

2000-07-20  Andrew V. Samoilov  <sav@bcs.zp.ua>

	* gtkedit/editcmd.c (edit_save_file): check fclose()s return value
	to prevent loss of data
	(edit_block_process_cmd): don't translate empty string

	* gtkedit/edit.h (edit_get_write_filter, edit_write_stream,
	edit_init_file): added declarations

	* edit.c (edit_filters): constified
	(edit_get_write_filter): filename constified
	(user_menu): don't translate empty string

	* syntax.c (syntax_text): constified
	(upgrade_syntax_file): syntax_line constified, f closed after use
